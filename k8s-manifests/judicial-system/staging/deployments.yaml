#####################################################################
#
# Do not edit this file manually, it is automatically generated.
# Run "yarn charts" instead.
#
#####################################################################
judicial-system-api:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-api'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-api'
  metadata:
    name: 'judicial-system-api'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        env:
          - name: 'CONFIGCAT_SDK_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/configcat/CONFIGCAT_SDK_KEY'
                name: 'CONFIGCAT_SDK_KEY'
          - name: 'AUTH_JWT_SECRET'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/AUTH_JWT_SECRET'
                name: 'AUTH_JWT_SECRET'
          - name: 'BACKEND_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/BACKEND_ACCESS_TOKEN'
                name: 'BACKEND_ACCESS_TOKEN'
          - name: 'CONTENTFUL_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/CONTENTFUL_ACCESS_TOKEN'
                name: 'CONTENTFUL_ACCESS_TOKEN'
          - name: 'XROAD_CLIENT_CERT'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_CERT'
                name: 'XROAD_CLIENT_CERT'
          - name: 'XROAD_CLIENT_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_KEY'
                name: 'XROAD_CLIENT_KEY'
          - name: 'XROAD_CLIENT_PEM'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_PEM'
                name: 'XROAD_CLIENT_PEM'
          - name: 'XROAD_COURTS_CREDENTIALS'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/COURTS_CREDENTIALS'
                name: 'XROAD_COURTS_CREDENTIALS'
          - name: 'XROAD_POLICE_API_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_POLICE_API_KEY'
                name: 'XROAD_POLICE_API_KEY'
          - name: 'HIDDEN_FEATURES'
            value: 'INDICTMENTS'
          - name: 'XROAD_BASE_PATH'
            value: 'http://securityserver.staging01.devland.is'
          - name: 'XROAD_BASE_PATH_WITH_ENV'
            value: 'http://securityserver.staging01.devland.is/r1/IS-TEST'
          - name: 'XROAD_TLS_BASE_PATH'
            value: 'https://securityserver.staging01.devland.is'
          - name: 'XROAD_TLS_BASE_PATH_WITH_ENV'
            value: 'https://securityserver.staging01.devland.is/r1/IS-TEST'
          - name: 'XROAD_CLIENT_ID'
            value: 'IS-TEST/GOV/5804170510/Rettarvorslugatt-Client'
          - name: 'XROAD_COURT_MEMBER_CODE'
            value: '4707171140'
          - name: 'XROAD_POLICE_MEMBER_CODE'
            value: '5309672079'
          - name: 'XROAD_COURT_API_PATH'
            value: '/Domstolasyslan/JusticePortal-v1'
          - name: 'XROAD_POLICE_API_PATH'
            value: '/Logreglan-Private/rettarvarsla-v1'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-api'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-api'
        readinessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '200m'
            memory: '256Mi'
          requests:
            cpu: '100m'
            memory: '128Mi'
        securityContext:
          allowPrivilegeEscalation: false
          fsGroup: 65534
          privileged: false
      serviceAccountName: 'judicial-system-api'
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-api.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-api'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-api'
judicial-system-backend:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-backend'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-backend'
  metadata:
    name: 'judicial-system-backend'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        env:
          - name: 'DB_PASS'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/DB_PASSWORD'
                name: 'DB_PASS'
          - name: 'DB_NAME'
            value: 'judicial_system'
          - name: 'DB_HOST'
            value: 'postgres-applications.internal'
          - name: 'DB_REPLICAS_HOST'
            value: 'postgres-applications.internal'
          - name: 'COURTS_MOBILE_NUMBERS'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/COURTS_MOBILE_NUMBERS'
                name: 'COURTS_MOBILE_NUMBERS'
          - name: 'DOKOBIT_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/DOKOBIT_ACCESS_TOKEN'
                name: 'DOKOBIT_ACCESS_TOKEN'
          - name: 'EMAIL_FROM'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/EMAIL_FROM'
                name: 'EMAIL_FROM'
          - name: 'EMAIL_FROM_NAME'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/EMAIL_FROM_NAME'
                name: 'EMAIL_FROM_NAME'
          - name: 'EMAIL_REPLY_TO'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/EMAIL_REPLY_TO'
                name: 'EMAIL_REPLY_TO'
          - name: 'EMAIL_REPLY_TO_NAME'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/EMAIL_REPLY_TO_NAME'
                name: 'EMAIL_REPLY_TO_NAME'
          - name: 'PRISON_EMAIL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/PRISON_EMAIL'
                name: 'PRISON_EMAIL'
          - name: 'PRISON_ADMIN_EMAIL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/PRISON_ADMIN_EMAIL'
                name: 'PRISON_ADMIN_EMAIL'
          - name: 'AUTH_JWT_SECRET'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/AUTH_JWT_SECRET'
                name: 'AUTH_JWT_SECRET'
          - name: 'ADMIN_USERS'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/ADMIN_USERS'
                name: 'ADMIN_USERS'
          - name: 'BACKEND_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/BACKEND_ACCESS_TOKEN'
                name: 'BACKEND_ACCESS_TOKEN'
          - name: 'CONTENTFUL_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/CONTENTFUL_ACCESS_TOKEN'
                name: 'CONTENTFUL_ACCESS_TOKEN'
          - name: 'EVENT_URL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/EVENT_URL'
                name: 'EVENT_URL'
          - name: 'ERROR_EVENT_URL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/ERROR_EVENT_URL'
                name: 'ERROR_EVENT_URL'
          - name: 'ARCHIVE_ENCRYPTION_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/ARCHIVE_ENCRYPTION_KEY'
                name: 'ARCHIVE_ENCRYPTION_KEY'
          - name: 'XROAD_CLIENT_CERT'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_CERT'
                name: 'XROAD_CLIENT_CERT'
          - name: 'XROAD_CLIENT_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_KEY'
                name: 'XROAD_CLIENT_KEY'
          - name: 'XROAD_CLIENT_PEM'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_CLIENT_PEM'
                name: 'XROAD_CLIENT_PEM'
          - name: 'XROAD_COURTS_CREDENTIALS'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/COURTS_CREDENTIALS'
                name: 'XROAD_COURTS_CREDENTIALS'
          - name: 'XROAD_POLICE_API_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/XROAD_POLICE_API_KEY'
                name: 'XROAD_POLICE_API_KEY'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-backend'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-backend'
        readinessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '400m'
            memory: '512Mi'
          requests:
            cpu: '100m'
            memory: '256Mi'
        securityContext:
          allowPrivilegeEscalation: false
          fsGroup: 65534
          privileged: false
      initContainers:
        - args:
            - 'sequelize-cli'
            - 'db:migrate'
          command:
            - 'npx'
          env:
            - name: 'NO_UPDATE_NOTIFIER'
              value: 'true'
          image: ''
      serviceAccountName: 'judicial-system-backend'
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-backend.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-backend'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-backend'
judicial-system-message-handler:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-message-handler'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-message-handler'
  metadata:
    name: 'judicial-system-message-handler'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        args:
          - '--no-experimental-fetch'
          - 'main.js'
        command:
          - 'node'
        env:
          - name: 'CONFIGCAT_SDK_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/configcat/CONFIGCAT_SDK_KEY'
                name: 'CONFIGCAT_SDK_KEY'
          - name: 'BACKEND_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/BACKEND_ACCESS_TOKEN'
                name: 'BACKEND_ACCESS_TOKEN'
          - name: 'SQS_REGION'
            value: 'eu-west-1'
          - name: 'BACKEND_URL'
            value: 'http://web-judicial-system-backend'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-message-handler'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-message-handler'
        readinessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '200m'
            memory: '256Mi'
          requests:
            cpu: '100m'
            memory: '128Mi'
        securityContext:
          allowPrivilegeEscalation: false
          fsGroup: 65534
          privileged: false
      serviceAccountName: 'judicial-system-message-handler'
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-message-handler.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-message-handler'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-message-handler'
judicial-system-scheduler:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-scheduler'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-scheduler'
  metadata:
    name: 'judicial-system-scheduler'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        args:
          - '--no-experimental-fetch'
          - 'main.js'
        command:
          - 'node'
        env:
          - name: 'CONFIGCAT_SDK_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/configcat/CONFIGCAT_SDK_KEY'
                name: 'CONFIGCAT_SDK_KEY'
          - name: 'BACKEND_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/BACKEND_ACCESS_TOKEN'
                name: 'BACKEND_ACCESS_TOKEN'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-scheduler'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-scheduler'
        readinessProbe:
          httpGet:
            path: '/'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '200m'
            memory: '256Mi'
          requests:
            cpu: '100m'
            memory: '128Mi'
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-scheduler.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-scheduler'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-scheduler'
judicial-system-web:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-web'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-web'
  metadata:
    name: 'judicial-system-web'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        env:
          - name: 'CONFIGCAT_SDK_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/configcat/CONFIGCAT_SDK_KEY'
                name: 'CONFIGCAT_SDK_KEY'
          - name: 'NATIONAL_REGISTRY_API_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/NATIONAL_REGISTRY_API_KEY'
                name: 'NATIONAL_REGISTRY_API_KEY'
          - name: 'LAWYERS_ICELAND_API_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/LAWYERS_ICELAND_API_KEY'
                name: 'LAWYERS_ICELAND_API_KEY'
          - name: 'SUPPORT_EMAIL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/SUPPORT_EMAIL'
                name: 'SUPPORT_EMAIL'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-web'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-web'
        readinessProbe:
          httpGet:
            path: '/readiness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '200m'
            memory: '256Mi'
          requests:
            cpu: '100m'
            memory: '128Mi'
        securityContext:
          allowPrivilegeEscalation: false
          privileged: false
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-web.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-web'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-web'
judicial-system-xrd-api:
  apiVersion: 'apps/v1'
  kind: 'Deployment'
  labels:
    tags.datadoghq.com/env: 'staging'
    tags.datadoghq.com/service: 'judicial-system-xrd-api'
    tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-xrd-api'
  metadata:
    name: 'judicial-system-xrd-api'
    namespace: 'judicial-system'
  spec:
    spec:
      containers:
        env:
          - name: 'CONFIGCAT_SDK_KEY'
            valueFrom:
              secretKeyRef:
                key: '/k8s/configcat/CONFIGCAT_SDK_KEY'
                name: 'CONFIGCAT_SDK_KEY'
          - name: 'ERROR_EVENT_URL'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/ERROR_EVENT_URL'
                name: 'ERROR_EVENT_URL'
          - name: 'BACKEND_ACCESS_TOKEN'
            valueFrom:
              secretKeyRef:
                key: '/k8s/judicial-system/BACKEND_ACCESS_TOKEN'
                name: 'BACKEND_ACCESS_TOKEN'
          - name: 'AUDIT_TRAIL_REGION'
            value: 'eu-west-1'
        image: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-xrd-api'
        imagePullPolicy: 'IfNotPresent'
        livenessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        name: 'judicial-system-xrd-api'
        readinessProbe:
          httpGet:
            path: '/liveness'
          initialDelaySeconds: 3
          timeoutSeconds: 3
        resources:
          limits:
            cpu: '200m'
            memory: '256Mi'
          requests:
            cpu: '100m'
            memory: '128Mi'
        securityContext:
          allowPrivilegeEscalation: false
          fsGroup: 65534
          privileged: false
      serviceAccountName: 'judicial-system-xrd-api'
    strategy:
      rollingUpdate:
        maxSurge: '25%'
        maxUnavailable: '25%'
      type: 'RollingUpdate'
    template:
      metadata:
        annotations:
          ad.datadoghq.com/judicial-system-xrd-api.logs: "[{\n              \"log_processing_rules\": [{\n                \"type\": \"mask_sequences\", \n                \"name\": \"mask_national_ids\", \n                \"replace_placeholder\": \"--MASKED--\", \n                \"pattern\" : \"\\b(?:[89]\\d{3}|(?:[012]\\d|3[01])(?:0\\d|1[012]))\\d\\d-?\\d{4}\\b\"\n              }]\n            }]"
        labels:
          tags.datadoghq.com/env: 'staging'
          tags.datadoghq.com/service: 'judicial-system-xrd-api'
          tags.datadoghq.com/version: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/judicial-system-xrd-api'
